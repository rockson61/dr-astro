import{c as h}from"./supabase.svVmE_Zl.js";const u=h(),o=document.querySelector("#edit-form"),s=o?.querySelector('button[type="submit"]'),w=document.querySelector("#delete-btn"),c=o?.dataset.id;o?.addEventListener("submit",async t=>{if(t.preventDefault(),!s)return;const l=s.textContent;s.textContent="Saving...",s.disabled=!0;const e=new FormData(o),d=e.get("title"),m=e.get("slug"),n=e.get("volume"),i=e.get("issue_number"),a=e.get("published_at"),g=e.get("description"),b=e.get("cover_image"),f=e.get("pdf_url"),p=e.get("status");try{const{error:r}=await u.from("issues").update({title:d,slug:m,volume:n?parseInt(n):null,issue_number:i?parseInt(i):null,published_at:a?new Date(a).toISOString():null,description:g,cover_image:b,pdf_url:f,status:p}).eq("id",c);if(r)throw r;window.location.href="/dashboard/issues"}catch(r){console.error(r),alert("Error updating issue: "+r.message),s.textContent=l,s.disabled=!1}});w?.addEventListener("click",async()=>{if(confirm("Are you sure you want to delete this issue?"))try{const{error:t}=await u.from("issues").delete().eq("id",c);if(t)throw t;window.location.href="/dashboard/issues"}catch(t){console.error(t),alert("Error deleting issue: "+t.message)}});
