import{c as u}from"./supabase.svVmE_Zl.js";const g=u(),f=document.getElementById("login-form"),e=document.getElementById("message"),w=document.getElementById("toggle-auth"),a=document.getElementById("password-field"),t=document.getElementById("submit-btn"),d=document.getElementById("toggle-password-visibility"),l=document.getElementById("password-input");let s=!1;w?.addEventListener("click",()=>{if(s=!s,a&&(s?(a.classList.remove("hidden"),a.animate([{opacity:0,transform:"translateY(-10px)"},{opacity:1,transform:"translateY(0)"}],{duration:300,fill:"forwards",easing:"ease-out"})):a.classList.add("hidden")),t){const n=t.querySelector("span");n&&(n.textContent=s?"Sign In":"Send Magic Link")}});d?.addEventListener("click",()=>{l.type==="password"?(l.type="text",d.classList.add("text-primary-600")):(l.type="password",d.classList.remove("text-primary-600"))});f?.addEventListener("submit",async n=>{n.preventDefault();const c=new FormData(n.target),r=c.get("email"),m=c.get("password");if(e&&(e.classList.add("hidden"),e.className="hidden p-4 rounded-xl text-center font-medium text-sm animate-fade-in"),t){const p=t.innerHTML;t.innerHTML='<span class="animate-spin">↻</span>',t.setAttribute("disabled","true"),t.classList.add("opacity-70","cursor-not-allowed");let i;try{if(s&&m){if(console.log("Attempting password login for:",r),i=await g.auth.signInWithPassword({email:r,password:m}),!i.error){console.log("Login success, redirecting..."),window.location.href="/dashboard";return}}else i=await g.auth.signInWithOtp({email:r,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});const{error:o}=i;o?e&&(e.textContent=o.message,e.classList.add("bg-red-50","text-red-600","border","border-red-100"),e.classList.remove("hidden")):s||e&&(e.textContent="✓ Check your email for the magic link!",e.classList.add("bg-green-50","text-green-600","border","border-green-100"),e.classList.remove("hidden"))}catch(o){console.error(o)}finally{t.innerHTML=p,t.removeAttribute("disabled"),t.classList.remove("opacity-70","cursor-not-allowed")}}});
