import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.JXKNaeUN.js";import{s as w}from"./supabase.Chw8hJPJ.js";import{S as y}from"./star.DSE2cwhi.js";import"./createLucideIcon.BhldaWgv.js";const E=({profileId:x,raterId:p,onSubmit:n})=>{const[o,i]=s.useState(0),[b,l]=s.useState(0),[u,c]=s.useState(""),[m,r]=s.useState(!1),[d,a]=s.useState(null),[g,f]=s.useState(!1),h=async e=>{if(e.preventDefault(),r(!0),a(null),f(!1),!o){a("Please select a rating."),r(!1);return}const{error:v}=await w.from("profile_ratings").insert({profile_id:x,rater_id:p,rating:o,comment:u});v?a("Could not submit review."):(f(!0),c(""),i(0),n&&n()),r(!1)};return t.jsxs("form",{onSubmit:h,className:"bg-white rounded-[24px] shadow-sm p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-bold mb-2 text-tuio-navy uppercase font-tuio",children:"Leave a Review"}),t.jsx("div",{className:"flex items-center mb-4",children:[1,2,3,4,5].map(e=>t.jsx("button",{type:"button",onClick:()=>i(e),onMouseEnter:()=>l(e),onMouseLeave:()=>l(0),className:"focus:outline-none","aria-label":`Rate ${e} star${e>1?"s":""}`,children:t.jsx(y,{className:`h-7 w-7 ${e<=(b||o)?"text-yellow-400 fill-yellow-400":"text-gray-300"} transition-colors`})},e))}),t.jsx("textarea",{className:"w-full border border-gray-200 rounded-[16px] p-3 mb-3 text-sm focus:ring-2 focus:ring-tuio-red focus:outline-none",rows:3,placeholder:"Write a comment (optional)",value:u,onChange:e=>c(e.target.value),maxLength:500}),d&&t.jsx("div",{className:"text-red-500 text-sm mb-2",children:d}),g&&t.jsx("div",{className:"text-green-600 text-sm mb-2",children:"Thank you for your review!"}),t.jsx("button",{type:"submit",className:"bg-tuio-red text-white px-6 py-2 rounded-full font-bold uppercase tracking-wide hover:bg-tuio-navy transition-colors disabled:opacity-50",disabled:m,children:m?"Submitting...":"Submit Review"})]})};export{E as default};
