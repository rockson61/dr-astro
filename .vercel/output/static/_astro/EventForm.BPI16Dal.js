import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.JXKNaeUN.js";import{c as b}from"./supabase.svVmE_Zl.js";import{G as h}from"./GlassCard.Cfd5MXeQ.js";import{C as m}from"./calendar.DS-ywnam.js";import{c as f}from"./createLucideIcon.BhldaWgv.js";import{M as v}from"./map-pin.BS-Bos_t.js";import{G as y}from"./globe.CSA5frsJ.js";import{F as _}from"./file-text.D17FhZid.js";import{L as j}from"./loader-circle.ofVaKFwt.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],w=f("video",N),i=b(),C=[{value:"Conference",label:"Conference"},{value:"Webinar",label:"Webinar"},{value:"Workshop",label:"Workshop"},{value:"Seminar",label:"Seminar"},{value:"Congress",label:"Congress"}];function G({initialData:r}){const[d,c]=u.useState(!1),[t,p]=u.useState({title:r?.title||"",type:r?.type||"Conference",start_date:r?.start_date?new Date(r.start_date).toISOString().slice(0,16):"",end_date:r?.end_date?new Date(r.end_date).toISOString().slice(0,16):"",location_name:r?.location_name||"",is_virtual:r?.is_virtual||!1,registration_url:r?.registration_url||"",description:r?.description||""}),s=a=>{const o=a.target.type==="checkbox"?a.target.checked:a.target.value;p({...t,[a.target.name]:o})},x=async a=>{a.preventDefault(),c(!0);try{const{data:{user:o}}=await i.auth.getUser();if(!o)throw new Error("Not authenticated");let l;if(r?.id){const{error:n}=await i.from("events").update({title:t.title,type:t.type,start_date:t.start_date,end_date:t.end_date||null,location_name:t.is_virtual?"Virtual":t.location_name,is_virtual:t.is_virtual,registration_url:t.registration_url,description:t.description,updated_at:new Date().toISOString()}).eq("id",r.id);l=n}else{const n=t.title.toLowerCase().replace(/[^a-z0-9]+/g,"-")+"-"+Math.random().toString(36).substring(2,7),{error:g}=await i.from("events").insert({title:t.title,slug:n,type:t.type,start_date:t.start_date,end_date:t.end_date||null,location_name:t.is_virtual?"Virtual":t.location_name,is_virtual:t.is_virtual,registration_url:t.registration_url,description:t.description,organizer_id:o.id,status:"upcoming"});l=g}if(l)throw l;window.location.href="/dashboard/my-events"}catch(o){console.error("Error saving event:",o),alert(o.message||"Failed to save event")}finally{c(!1)}};return e.jsxs(h,{className:"max-w-4xl mx-auto p-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-tuio-navy mb-6 flex items-center gap-3",children:[e.jsx(m,{className:"w-8 h-8 text-tuio-red"}),"Create New Event"]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Event Title *"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",name:"title",required:!0,value:t.title,onChange:s,placeholder:"e.g. Annual Dental Congress",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Event Type *"}),e.jsx("select",{name:"type",required:!0,value:t.type,onChange:s,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all bg-white",children:C.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Start Date *"}),e.jsx("input",{type:"datetime-local",name:"start_date",required:!0,value:t.start_date,onChange:s,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"End Date (Optional)"}),e.jsx("input",{type:"datetime-local",name:"end_date",value:t.end_date,onChange:s,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl",children:[e.jsx("input",{type:"checkbox",id:"is_virtual",name:"is_virtual",checked:t.is_virtual,onChange:s,className:"w-5 h-5 text-tuio-red rounded focus:ring-tuio-red border-gray-300"}),e.jsxs("label",{htmlFor:"is_virtual",className:"font-bold text-gray-700 flex items-center gap-2 cursor-pointer select-none",children:[e.jsx(w,{className:"w-5 h-5 text-tuio-red"}),"This is a Virtual Event / Webinar"]})]}),!t.is_virtual&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Location / Venue *"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",name:"location_name",required:!t.is_virtual,value:t.location_name,onChange:s,placeholder:"e.g. Jacob Javits Center, NYC",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Registration Link *"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"url",name:"registration_url",required:!0,value:t.registration_url,onChange:s,placeholder:"https://...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Event Details *"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("textarea",{name:"description",required:!0,value:t.description,onChange:s,rows:6,placeholder:"Describe the event, speakers, and agenda...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",disabled:d,className:"px-8 py-4 bg-tuio-red text-white rounded-xl font-bold uppercase tracking-wide hover:bg-tuio-navy transition-all shadow-lg hover:shadow-xl hover:-translate-y-1 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-5 h-5 animate-spin"}),"creating..."]}):"Create Event"})})]})]})}export{G as default};
