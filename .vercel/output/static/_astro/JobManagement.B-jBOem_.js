import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.JXKNaeUN.js";import{c as w}from"./supabase.Chw8hJPJ.js";import{G as c}from"./GlassCard.Cfd5MXeQ.js";import{G as _}from"./GlassContainer.OVLJuRR9.js";import{P as C}from"./plus.x7Bu--mN.js";import{B as S}from"./briefcase.TXRBvSyY.js";import{C as L}from"./circle-check-big.B_c9Grz5.js";import{C as A,E as k}from"./external-link.C_b5xoWq.js";import{S as J}from"./search.BNTBrPA9.js";import{c as E}from"./createLucideIcon.BhldaWgv.js";import{T}from"./trash-2.Fj75jIkq.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],I=E("power",P),m=w();function H(){const[r,o]=l.useState([]),[u,h]=l.useState(!0),[x,b]=l.useState(""),[i,y]=l.useState("all"),[f,n]=l.useState(!1);l.useEffect(()=>{j()},[]);const j=async()=>{try{h(!0);const{data:t,error:s}=await m.from("jobs").select("*").order("created_at",{ascending:!1});if(s)throw s;t&&o(t)}catch(t){console.error("Error fetching jobs:",t),alert("Failed to load jobs")}finally{h(!1)}},v=async(t,s)=>{try{n(!0);const{error:a}=await m.from("jobs").update({is_active:!s}).eq("id",t);if(a)throw a;o(r.map(p=>p.id===t?{...p,is_active:!s}:p))}catch(a){console.error("Error updating job status:",a),alert("Failed to update status")}finally{n(!1)}},N=async t=>{if(confirm("Are you sure you want to delete this job? This cannot be undone."))try{n(!0);const{error:s}=await m.from("jobs").delete().eq("id",t);if(s)throw s;o(r.filter(a=>a.id!==t))}catch(s){console.error("Error deleting job:",s),alert("Failed to delete job")}finally{n(!1)}},g=r.filter(t=>{const s=t.title.toLowerCase().includes(x.toLowerCase())||t.company_name.toLowerCase().includes(x.toLowerCase()),a=i==="all"||i==="active"&&t.is_active||i==="inactive"&&!t.is_active;return s&&a}),d={total:r.length,active:r.filter(t=>t.is_active).length,inactive:r.filter(t=>!t.is_active).length};return u?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading jobs..."}):e.jsx(_,{className:"pt-24 pb-16",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Job Management"}),e.jsx("p",{className:"text-slate-600",children:"Manage job postings and recruitment."})]}),e.jsxs("a",{href:"/dashboard/jobs/new",className:"px-6 py-3 bg-tuio-red text-white rounded-xl font-bold uppercase tracking-wide hover:bg-tuio-navy transition-all shadow-lg flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5"}),"Post Job"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(c,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase",children:"Total Jobs"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800",children:d.total})]}),e.jsx(S,{className:"w-10 h-10 text-blue-500 opacity-20"})]}),e.jsxs(c,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 font-bold uppercase",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:d.active})]}),e.jsx(L,{className:"w-10 h-10 text-green-500 opacity-20"})]}),e.jsxs(c,{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-bold uppercase",children:"Inactive"}),e.jsx("p",{className:"text-3xl font-bold text-gray-500",children:d.inactive})]}),e.jsx(A,{className:"w-10 h-10 text-gray-300 opacity-20"})]})]}),e.jsx(c,{className:"p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative flex-grow max-w-lg",children:[e.jsx(J,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by title or company...",value:x,onChange:t=>b(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("select",{value:i,onChange:t=>y(t.target.value),className:"px-4 py-2 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Jobs"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})}),e.jsx(c,{className:"!p-0 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase",children:"Title & Company"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase",children:"Location"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase",children:"Posted"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-500 uppercase",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[g.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-slate-800",children:t.title}),e.jsx("span",{className:"text-sm text-gray-600",children:t.company_name}),e.jsxs("a",{href:`/jobs/${t.slug}`,target:"_blank",className:"text-xs text-blue-500 hover:underline flex items-center gap-1 mt-1",children:["View Job ",e.jsx(k,{className:"w-3 h-3"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.location}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs font-bold uppercase",children:t.type.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>v(t.id,t.is_active),disabled:f,className:`p-2 rounded-lg transition-colors ${t.is_active?"bg-orange-50 text-orange-600 hover:bg-orange-100":"bg-green-50 text-green-600 hover:bg-green-100"}`,title:t.is_active?"Deactivate":"Activate",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N(t.id),disabled:f,className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors title='Delete'",children:e.jsx(T,{className:"w-5 h-5"})})]})})]},t.id)),g.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No jobs found."})})]})]})})})]})})}export{H as default};
