import{c as f}from"./supabase.Chw8hJPJ.js";const i=f(),a=document.querySelector("form"),t=a?.querySelector('button[type="submit"]');function w(o){return o.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}a?.addEventListener("submit",async o=>{if(o.preventDefault(),!t)return;const u=t.textContent;t.textContent="Creating...",t.disabled=!0;const e=new FormData(a),n=e.get("name"),g=e.get("price"),l=e.get("description"),d=e.get("category"),s=e.get("image_url");try{const{data:{user:r}}=await i.auth.getUser();if(!r)throw new Error("Not authenticated");const m=`${w(n)}-${Math.random().toString(36).substring(2,7)}`,p=s?[s]:[],{error:c}=await i.from("products").insert({name:n,slug:m,price:g,description:l,category:d,images:p,seller_id:r.id,status:"active"});if(c)throw c;window.location.href="/dashboard/my-products"}catch(r){console.error(r),alert("Error creating product: "+r.message),t.textContent=u,t.disabled=!1}});
