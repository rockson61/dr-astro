import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.JXKNaeUN.js";import{S}from"./search.BNTBrPA9.js";import{X as _}from"./x.B-Gzv4eI.js";import{c as D}from"./createLucideIcon.BhldaWgv.js";import{M as T}from"./map-pin.BS-Bos_t.js";import{A as J}from"./arrow-right.C15kV8_m.js";import{S as k}from"./store.C13YwLBx.js";import{B}from"./briefcase.TXRBvSyY.js";import{C as Y}from"./calendar.DS-ywnam.js";import{F as U}from"./file-text.D17FhZid.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Q=D("clock",z);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],G=D("user",X);function K(a,i){let o;return(...p)=>{clearTimeout(o),o=setTimeout(()=>a(...p),i)}}function ie(){const[a,i]=r.useState(""),[o,p]=r.useState("all"),[g,C]=r.useState("relevance"),[m,I]=r.useState("all"),[j,u]=r.useState([]),[v,b]=r.useState(!1),[w,f]=r.useState(!1),[x,y]=r.useState([]),[$,h]=r.useState(!1);r.useEffect(()=>{const e=localStorage.getItem("dr_recent_searches");e&&y(JSON.parse(e))},[]);const R=e=>{if(!e||e.length<2)return;const l=[e,...x.filter(s=>s!==e)].slice(0,5);y(l),localStorage.setItem("dr_recent_searches",JSON.stringify(l))},L=(e,l)=>{e.stopPropagation();const s=x.filter(n=>n!==l);y(s),localStorage.setItem("dr_recent_searches",JSON.stringify(s))},H=async(e,l,s,n)=>{if(!e||e.length<2){u([]);return}b(!0),f(!0),h(!1),R(e);try{let c="",V="";const N=new Date;if(n==="30days"){const d=new Date;d.setDate(N.getDate()-30),c=d.toISOString()}else if(n==="year"){const d=new Date;d.setFullYear(N.getFullYear()-1),c=d.toISOString()}const M=new URLSearchParams({q:e,type:l,sort:s,...c&&{startDate:c}}),P=await(await fetch(`/api/search?${M.toString()}`)).json();u(P.results||[])}catch(c){console.error("Search failed",c)}finally{b(!1)}},F=r.useCallback(K((e,l,s,n)=>H(e,l,s,n),500),[]);r.useEffect(()=>{a.length>=2?F(a,o,g,m):(u([]),f(!1))},[a,o,g,m]);const O=[{id:"all",label:"All"},{id:"articles",label:"Articles"},{id:"people",label:"People"},{id:"events",label:"Events"},{id:"directory",label:"Directory"},{id:"jobs",label:"Jobs"},{id:"products",label:"Products"}],A=e=>{switch(e){case"article":return t.jsx(U,{className:"w-5 h-5 text-blue-500"});case"event":return t.jsx(Y,{className:"w-5 h-5 text-orange-500"});case"job":return t.jsx(B,{className:"w-5 h-5 text-red-500"});case"listing":return t.jsx(k,{className:"w-5 h-5 text-green-500"});case"profile":return t.jsx(G,{className:"w-5 h-5 text-red-500"});case"product":return t.jsx(k,{className:"w-5 h-5 text-tuio-red"});default:return t.jsx(S,{className:"w-5 h-5 text-gray-400"})}},E=e=>{switch(e.type){case"article":return`/articles/${e.slug}`;case"event":return`/events/${e.slug}`;case"job":return`/jobs/${e.slug}`;case"listing":return`/directory/${e.slug}`;case"profile":return`/profile/${e.slug||"id"}`;case"product":return`/products/${e.slug}`;default:return"#"}};return t.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsx("div",{className:"absolute inset-x-0 -top-40 h-40 bg-gradient-to-b from-tuio-red/20 to-transparent pointer-events-none"}),t.jsxs("div",{className:"relative z-10 bg-white rounded-[24px] shadow-lg flex flex-col border border-gray-100 focus-within:ring-4 ring-tuio-red/20 transition-all overflow-hidden",children:[t.jsxs("div",{className:"flex items-center p-2",children:[t.jsx("div",{className:"pl-4 pr-3 text-gray-400",children:t.jsx(S,{className:"w-6 h-6"})}),t.jsx("input",{type:"text",value:a,onChange:e=>{i(e.target.value),e.target.value||h(!0)},onFocus:()=>h(!0),onBlur:()=>setTimeout(()=>h(!1),200),placeholder:"Search articles, dentists, events...",className:"flex-grow bg-transparent border-none outline-none text-lg text-gray-700 placeholder:text-gray-400 py-3",autoComplete:"off"}),a&&t.jsx("button",{onClick:()=>{i(""),u([]),f(!1)},className:"p-2 text-gray-400 hover:text-gray-600",children:t.jsx(_,{className:"w-5 h-5"})}),v&&t.jsx("div",{className:"pr-4",children:t.jsx("div",{className:"w-5 h-5 border-2 border-tuio-red border-t-transparent rounded-full animate-spin"})})]}),$&&x.length>0&&!a&&t.jsxs("div",{className:"border-t border-gray-100 bg-gray-50/50 p-2",children:[t.jsx("div",{className:"px-4 py-2 text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Recent Searches"}),t.jsx("ul",{children:x.map((e,l)=>t.jsx("li",{children:t.jsxs("button",{onMouseDown:s=>s.preventDefault(),onClick:()=>i(e),className:"w-full text-left px-4 py-2 hover:bg-white hover:shadow-sm rounded-lg flex items-center justify-between text-gray-600 group transition-all",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Q,{className:"w-4 h-4 text-gray-400"}),e]}),t.jsx("span",{onClick:s=>L(s,e),className:"opacity-0 group-hover:opacity-100 p-1 hover:text-red-500",children:t.jsx(_,{className:"w-3 h-3"})})]})},l))})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mt-6 items-center justify-between",children:[t.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:O.map(e=>t.jsx("button",{onClick:()=>p(e.id),className:`px-4 py-2 rounded-full text-sm font-bold transition-all ${o===e.id?"bg-tuio-navy text-white shadow-md transform scale-105":"bg-white text-gray-500 hover:bg-gray-100"}`,children:e.label},e.id))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:m,onChange:e=>I(e.target.value),className:"bg-white border-none py-2 px-4 rounded-full text-sm font-bold text-gray-600 shadow-sm cursor-pointer hover:bg-gray-50 focus:ring-0",children:[t.jsx("option",{value:"all",children:"Any Date"}),t.jsx("option",{value:"30days",children:"Last 30 Days"}),t.jsx("option",{value:"year",children:"Last Year"})]}),t.jsxs("select",{value:g,onChange:e=>C(e.target.value),className:"bg-white border-none py-2 px-4 rounded-full text-sm font-bold text-gray-600 shadow-sm cursor-pointer hover:bg-gray-50 focus:ring-0",children:[t.jsx("option",{value:"relevance",children:"Relevance"}),t.jsx("option",{value:"newest",children:"Newest"}),t.jsx("option",{value:"oldest",children:"Oldest"})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[j.length>0?j.map(e=>t.jsx("a",{href:E(e),className:"block bg-white rounded-[20px] p-6 shadow-sm hover:shadow-md transition-all border border-gray-100 group hover:-translate-y-1",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"shrink-0 w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center",children:e.image_url||e.avatar_url?t.jsx("img",{src:e.image_url||e.avatar_url,alt:e.title||e.full_name||"Image",className:"w-full h-full rounded-full object-cover"}):A(e.type)}),t.jsxs("div",{className:"flex-grow min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-[10px] uppercase font-bold px-2 py-0.5 rounded-full bg-gray-100 text-gray-500",children:e.type}),e.location&&t.jsxs("span",{className:"flex items-center text-xs text-gray-400",children:[t.jsx(T,{className:"w-3 h-3 mr-1"})," ",e.location]}),e.created_at&&t.jsx("span",{className:"text-[10px] text-gray-300",children:new Date(e.created_at).toLocaleDateString()})]}),t.jsx("h3",{className:"text-lg font-bold text-tuio-navy group-hover:text-tuio-red transition-colors truncate",children:e.title||e.full_name||e.business_name}),t.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mt-1",children:e.excerpt||e.description||e.specialty||e.company_name})]}),t.jsx("div",{className:"self-center text-gray-300 group-hover:text-tuio-red transition-colors",children:t.jsx(J,{className:"w-5 h-5"})})]})},`${e.type}-${e.id}`)):w&&!v&&a.length>=2&&t.jsxs("div",{className:"text-center py-20 bg-white/50 rounded-3xl border border-dashed border-gray-200",children:[t.jsx("div",{className:"text-4xl mb-4",children:"ðŸ¤”"}),t.jsx("h3",{className:"text-lg font-bold text-gray-700",children:"No results found"}),t.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms or filters."})]}),!w&&!a&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-400 text-sm",children:"Start typing to search across the entire platform."})})]})]})}export{ie as default};
