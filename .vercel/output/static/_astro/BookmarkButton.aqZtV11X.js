import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.JXKNaeUN.js";function g({articleId:d,initialIsSaved:c}){const[e,o]=l.useState(c),[s,n]=l.useState(!1),u=async()=>{if(!s){n(!0);try{const t=!e;o(t);const r=await fetch("/api/bookmarks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({article_id:d})});if(!r.ok){if(r.status===401){alert("Please log in to save articles."),window.location.href="/login";return}throw new Error("Failed to update bookmark")}const i=await r.json();i.saved!==t&&o(i.saved)}catch(t){console.error(t),o(!e),alert("Failed to save article. Please try again.")}finally{n(!1)}}};return a.jsxs("button",{onClick:u,disabled:s,className:`group flex items-center gap-2 px-4 py-2 rounded-full transition-all ${e?"bg-tuio-navy text-white hover:bg-tuio-navy/90":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,"aria-label":e?"Remove from bookmarks":"Save for later",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`w-5 h-5 transition-transform ${e?"scale-110":"group-hover:scale-110"}`,fill:e?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),a.jsx("span",{className:"font-medium text-sm hidden md:inline",children:e?"Saved":"Save"})]})}export{g as default};
