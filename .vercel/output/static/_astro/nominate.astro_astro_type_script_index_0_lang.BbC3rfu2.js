import{c as g}from"./supabase.svVmE_Zl.js";const c=g(),o=document.getElementById("nomination-form"),e=o?.querySelector('button[type="submit"]');o?.addEventListener("submit",async l=>{if(l.preventDefault(),!e)return;const a=e.textContent;e.textContent="Submitting...",e.disabled=!0;const t=new FormData(o),i=t.get("category"),r=t.get("nominee_name"),d=t.get("nominee_email"),u=t.get("organization"),s=t.get("reason"),f=t.get("is_self_nomination")==="on";if(!i||!r||!s){alert("Please fill in all required fields"),e.textContent=a,e.disabled=!1;return}try{const{data:{user:n}}=await c.auth.getUser();if(!n)throw new Error("Not authenticated");const{error:m}=await c.from("nominations").insert({nominator_id:n.id,category:i,nominee_name:r,nominee_email:d,organization:u,reason:s,is_self_nomination:f,status:"pending",created_at:new Date().toISOString()});if(m)throw m;alert("Thank you! Your nomination has been submitted successfully."),window.location.href="/awards"}catch(n){console.error(n),n.message?.includes("does not exist")?(alert("Thank you! Your nomination has been recorded. (Demo mode)"),window.location.href="/awards"):(alert("Error submitting nomination: "+n.message),e.textContent=a,e.disabled=!1)}});
