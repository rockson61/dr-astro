import{c as f}from"./supabase.svVmE_Zl.js";const v=f(),o=document.querySelector("form"),t=o?.querySelector('button[type="submit"]');o?.addEventListener("submit",async l=>{if(l.preventDefault(),!t)return;const c=t.textContent;t.textContent="Creating...",t.disabled=!0;const e=new FormData(o),d=e.get("title"),m=e.get("slug"),u=e.get("volume"),a=e.get("issue_number"),r=e.get("published_at"),p=e.get("description"),g=e.get("cover_image"),b=e.get("pdf_url");try{const{error:s}=await v.from("issues").insert({title:d,slug:m,volume:u?parseInt(u):null,issue_number:a?parseInt(a):null,published_at:r?new Date(r).toISOString():null,description:p,cover_image:g,pdf_url:b,status:r?"published":"draft"});if(s)throw s;window.location.href="/dashboard/issues"}catch(s){console.error(s),alert("Error creating issue: "+s.message),t.textContent=c,t.disabled=!1}});const i=document.querySelector('input[name="title"]'),n=document.querySelector('input[name="slug"]');i?.addEventListener("input",()=>{(!n.value||n.value===n.defaultValue)&&(n.value=i.value.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"))});
