import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as m}from"./index.JXKNaeUN.js";import{c as h}from"./supabase.C4yJ2ZhP.js";import{G as g}from"./GlassCard.Cfd5MXeQ.js";import{B as p}from"./briefcase.TXRBvSyY.js";import{B as f}from"./building-2.DyrblHIy.js";import{M as j}from"./map-pin.BS-Bos_t.js";import{c as v}from"./createLucideIcon.BhldaWgv.js";import{G as N}from"./globe.CSA5frsJ.js";import{F as _}from"./file-text.D17FhZid.js";import{L as w}from"./loader-circle.ofVaKFwt.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],u=v("dollar-sign",C),i=h(),k=[{value:"full_time",label:"Full Time"},{value:"part_time",label:"Part Time"},{value:"contract",label:"Contract"},{value:"locum",label:"Locum"},{value:"internship",label:"Internship"}];function G({initialData:r}){const[c,d]=m.useState(!1),[a,x]=m.useState({title:r?.title||"",company_name:r?.company_name||"",location:r?.location||"",type:r?.type||"full_time",salary_min:r?.salary_min||"",salary_max:r?.salary_max||"",apply_url:r?.apply_url||"",description:r?.description||""}),l=s=>{x({...a,[s.target.name]:s.target.value})},y=async s=>{s.preventDefault(),d(!0);try{const{data:{user:t}}=await i.auth.getUser();if(!t)throw new Error("Not authenticated");let o;if(r?.id){const{error:n}=await i.from("jobs").update({title:a.title,company_name:a.company_name,location:a.location,type:a.type,salary_min:a.salary_min?parseInt(a.salary_min):null,salary_max:a.salary_max?parseInt(a.salary_max):null,apply_url:a.apply_url,description:a.description,updated_at:new Date().toISOString()}).eq("id",r.id);o=n}else{const n=a.title.toLowerCase().replace(/[^a-z0-9]+/g,"-")+"-"+Math.random().toString(36).substring(2,7),{error:b}=await i.from("jobs").insert({title:a.title,slug:n,company_name:a.company_name,location:a.location,type:a.type,salary_min:a.salary_min?parseInt(a.salary_min):null,salary_max:a.salary_max?parseInt(a.salary_max):null,apply_url:a.apply_url,description:a.description,user_id:t.id,is_active:!0});o=b}if(o)throw o;window.location.href="/dashboard/my-jobs"}catch(t){console.error("Error saving job:",t),alert(t.message||"Failed to save job")}finally{d(!1)}};return e.jsxs(g,{className:"max-w-4xl mx-auto p-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-tuio-navy mb-6 flex items-center gap-3",children:[e.jsx(p,{className:"w-8 h-8 text-tuio-red"}),"Post a New Job"]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Job Title *"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",name:"title",required:!0,value:a.title,onChange:l,placeholder:"e.g. Associate Dentist",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Company Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",name:"company_name",required:!0,value:a.company_name,onChange:l,placeholder:"My Dental Clinic",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Location *"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",name:"location",required:!0,value:a.location,onChange:l,placeholder:"e.g. New York, NY (or Remote)",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Job Type *"}),e.jsx("div",{className:"relative",children:e.jsx("select",{name:"type",required:!0,value:a.type,onChange:l,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all appearance-none bg-white",children:k.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Salary Range (Optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(u,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"number",name:"salary_min",value:a.salary_min,onChange:l,placeholder:"Min",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red outline-none"})]}),e.jsx("span",{className:"self-center text-gray-400",children:"-"}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(u,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"number",name:"salary_max",value:a.salary_max,onChange:l,placeholder:"Max",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red outline-none"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Application Link / Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",name:"apply_url",required:!0,value:a.apply_url,onChange:l,placeholder:"https://... or mailto:...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Job Description *"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("textarea",{name:"description",required:!0,value:a.description,onChange:l,rows:6,placeholder:"Describe the role, responsibilities, and requirements...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tuio-red focus:border-transparent outline-none transition-all"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",disabled:c,className:"px-8 py-4 bg-tuio-red text-white rounded-xl font-bold uppercase tracking-wide hover:bg-tuio-navy transition-all shadow-lg hover:shadow-xl hover:-translate-y-1 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-5 h-5 animate-spin"}),"Publishing..."]}):"Post Job Now"})})]})]})}export{G as default};
