import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.JXKNaeUN.js";import{c as k}from"./createLucideIcon.BhldaWgv.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],h=k("heart",m);function b({articleId:d,initialLikes:u=0,initialIsLiked:p=!1}){const[e,o]=n.useState(p),[i,s]=n.useState(u),[f,c]=n.useState(!1),g=async()=>{if(f)return;c(!0);const r=e,l=i;o(!e),s(t=>e?t-1:t+1);try{(await fetch("/api/social/like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({article_id:d,action:r?"unlike":"like"})})).ok||(o(r),s(l),window.showToast&&window.showToast("Please login to like articles","error"))}catch(t){console.error("Like error:",t),o(r),s(l)}finally{c(!1)}};return a.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all group ${e?"bg-red-50 text-red-500":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,children:[a.jsx(h,{className:`w-5 h-5 transition-transform ${e?"fill-red-500 scale-110":"group-hover:scale-110"}`}),a.jsx("span",{className:"font-bold",children:i})]})}export{b as default};
