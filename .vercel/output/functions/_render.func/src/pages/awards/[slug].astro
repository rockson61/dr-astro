---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { supabase } from "../../lib/supabase";

export const prerender = false;

const { slug } = Astro.params;

// Fetch award
const { data: award } = await supabase
    .from("awards")
    .select("*")
    .eq("slug", slug)
    .single();

// Mock fallback
const mockAward = {
    title: "Best Clinical Case 2026",
    description: `Recognizing the most challenging and well-documented clinical cases of the year. This award celebrates excellence in diagnosis, treatment planning, and execution.

  **Evaluation Criteria:**
  - Case complexity
  - Documentation quality (photos, x-rays)
  - Scientific basis of treatment
  - Long-term follow-up`,
    icon: "üèÜ",
    nomination_deadline: "Oct 31, 2026",
    winner_announcement: "Dec 15, 2026",
    category: "Clinical Excellence",
};

const displayAward = award || mockAward;
---

<BaseLayout title={`${displayAward.title} | DentalReach Awards`}>
    <div class="bg-tuio-bg py-16 min-h-screen flex items-center">
        <div class="container mx-auto px-4 max-w-4xl">
            <div class="mb-8 text-center">
                <a
                    href="/awards"
                    class="text-gray-500 hover:text-tuio-red font-bold uppercase tracking-widest text-sm"
                >
                    ‚Üê Back to Awards
                </a>
            </div>

            <div
                class="bg-white rounded-[40px] shadow-xl overflow-hidden text-center relative"
            >
                <div
                    class="absolute inset-0 bg-gradient-to-b from-yellow-50/50 to-transparent pointer-events-none"
                >
                </div>

                <div class="p-12 md:p-16 relative z-10">
                    <div
                        class="w-24 h-24 mx-auto bg-yellow-100 rounded-full flex items-center justify-center text-5xl mb-6 shadow-inner text-yellow-500 border border-yellow-200"
                    >
                        {displayAward.icon || "üèÜ"}
                    </div>

                    <span
                        class="bg-tuio-navy text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wide mb-6 inline-block"
                    >
                        {displayAward.category}
                    </span>

                    <h1
                        class="font-tuio text-4xl md:text-5xl text-tuio-navy mb-6 max-w-2xl mx-auto uppercase"
                    >
                        {displayAward.title}
                    </h1>

                    <div
                        class="prose prose-lg text-gray-600 max-w-2xl mx-auto mb-10 font-light"
                        set:html={displayAward.description?.replace(
                            /\n/g,
                            "<br/>",
                        )}
                    />

                    <div
                        class="grid grid-cols-2 gap-4 max-w-md mx-auto mb-10 bg-gray-50 p-6 rounded-2xl border border-gray-100"
                    >
                        <div>
                            <span
                                class="block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1"
                                >Deadline</span
                            >
                            <span class="block text-tuio-navy font-bold"
                                >{displayAward.nomination_deadline}</span
                            >
                        </div>
                        <div>
                            <span
                                class="block text-xs font-bold text-gray-400 uppercase tracking-widest mb-1"
                                >Announcement</span
                            >
                            <span class="block text-tuio-navy font-bold"
                                >{displayAward.winner_announcement}</span
                            >
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button
                            class="px-8 py-4 bg-tuio-red text-white rounded-full font-bold uppercase tracking-wide hover:bg-tuio-navy transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1"
                        >
                            Nominate Now
                        </button>
                        <button
                            class="px-8 py-4 bg-white border-2 border-tuio-navy text-tuio-navy rounded-full font-bold uppercase tracking-wide hover:bg-tuio-navy hover:text-white transition-all"
                        >
                            View Past Winners
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</BaseLayout>
